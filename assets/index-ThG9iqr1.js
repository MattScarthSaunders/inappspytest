var d=Object.defineProperty;var l=(r,e,i)=>e in r?d(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i;var s=(r,e,i)=>l(r,typeof e!="symbol"?e+"":e,i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function i(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(t){if(t.ep)return;t.ep=!0;const o=i(t);fetch(t.href,o)}})();class m{constructor(){s(this,"inAppRegExps",["WebView","(iPhone|iPod|iPad)(?!.*Safari/)","Android.*wv\\)","FB_\\w|FB\\w"]);s(this,"inappRegex",new RegExp(`${this.inAppRegExps.map(e=>`(${e})`).join("|")}`,"ig"));s(this,"appNameRegExps",{fbMessenger:/\bFB[\w_]+\/(Messenger|MESSENGER)/,facebook:/\bFB[\w_]+\//,twitter:/\bTwitter/i,instagram:/\bInstagram/i,tiktok:/musical_ly|Bytedance/i,linkedin:/LinkedInApp/i});s(this,"appKeysDetectByUA",Object.keys(this.appNameRegExps))}isiOS(e){const i=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"],n=window&&window.document&&e.includes("Mac")&&"ontouchend"in window.document;return i.includes(e)||n}detectUserAgent(){const e=this.getUserAgent();if(e.match(this.inappRegex)!==null)return{isInApp:!0,appKey:this.getAppKey(e),userAgent:e}}redirect(e){const n=[["utm_source",localStorage.getItem("utm_source")],["utm_medium",localStorage.getItem("utm_medium")],["utm_campaign",localStorage.getItem("utm_campaign")],["utm_content",localStorage.getItem("utm_content")]].filter(t=>t[1]).map(t=>t.join("="));this.isiOS(e)?window.location.href=`x-safari-https://nodescript.dev/signup?${n?"?"+n.join("&"):""}`:window.location.href=`intent:https://nodescript.dev/signup${n?"?"+n.join("&"):""}#Intent;end`}getAppKey(e){return this.appKeysDetectByUA.find(i=>this.appNameRegExps[i].test(e))}getUserAgent(){var e,i;if(typeof window<"u"){const n=((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)||((i=window==null?void 0:window.navigator)==null?void 0:i.vendor)||(window==null?void 0:window.opera);if(n)return n}return""}}localStorage.setItem("utm_source","test");const a=new m,{isInApp:p,userAgent:u}=a.detectUserAgent(),g=document.getElementById("test");g.innerHTML=`${p}, ${u}`;p&&a.redirect(u);
